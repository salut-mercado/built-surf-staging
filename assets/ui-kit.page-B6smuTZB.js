import{u as A,j as e,c as M,a as I,r as i,A as y,B,C as S,I as z,b as R,D as W,d as N,N as _,L as P,e as q,T as O,f as G,g as K,h as b,i as f,k as j,l as Q,m as H}from"./index-DqJRhQYd.js";const Z=({ns:s,children:t,...a})=>{const[n,r,l]=A(s,a);return t(n,{i18n:r,lng:r.language},l)};function m({title:s,description:t,children:a,className:n}){return e.jsxs("section",{className:M("flex flex-col gap-4",n),children:[e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wider text-foreground/60",children:s}),t&&e.jsx("p",{className:"text-sm text-muted-foreground",children:t})]}),e.jsx("div",{className:"rounded-xl border border-border/60 bg-card p-5 shadow-sm",children:a})]})}function U({data:s,isLoading:t=!1,isError:a=!1,error:n=null}){return{data:s,isLoading:t,isError:a,error:n,refetch:()=>Promise.resolve()}}function X(){const s=I.suppliers.useGetAll(),[t,a]=i.useState(""),[n,r]=i.useState([]),l=i.useMemo(()=>U({data:s.data??[]}),[s.data]),d=U({isLoading:!0}),p=U({isError:!0,error:new Error("Failed to load suppliers")});return e.jsxs("div",{className:"grid gap-5",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-muted-foreground",children:"Single Select (Remote Data)"}),e.jsx(y,{value:t,onValueChange:a,query:s,placeholder:"Select supplier",transform:o=>(o??[]).map(c=>({label:c.name,value:c.id,...c})),renderOption:o=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-sm",children:o.name}),o.code!=null&&e.jsx(B,{variant:"outline",children:o.code})]})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-muted-foreground",children:"Multi Select (Controlled)"}),e.jsx(y,{multiple:!0,values:n,onValuesChange:r,query:s,placeholder:"Pick multiple suppliers",transform:o=>(o??[]).map(c=>({label:c.name,value:c.id}))})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-muted-foreground",children:"Grouped Options"}),e.jsx(y,{query:l,placeholder:"Grouped by first letter",transform:o=>(o??[]).map(c=>({label:c.name,value:c.id,group:c.name[0]?.toUpperCase()??"#"})),groupBy:o=>o.group})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-muted-foreground",children:"Loading State"}),e.jsx(y,{query:d,placeholder:"Loading...",transform:o=>(o??[]).map(c=>({label:c.name,value:c.id}))})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-muted-foreground",children:"Error State"}),e.jsx(y,{query:p,placeholder:"Error example",transform:o=>(o??[]).map(c=>({label:c.name,value:c.id}))})]})]}),e.jsx("pre",{className:"rounded-md bg-muted px-3 py-2 text-xs text-muted-foreground",children:JSON.stringify({selectedValue:t,selectedValues:n},null,2)})]})}function Y(){const[s,t]=i.useState("");return e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs(S,{onBarcodeDetected:a=>{t(a[0].rawValue)},autoCloseOnBarcodeDetected:!0,children:[e.jsxs(S.Trigger,{children:[e.jsx(z,{className:"size-4"})," Scan Barcode"]}),e.jsx(S.Content,{title:"Scan Barcode",children:e.jsx(S.Video,{})})]}),e.jsx("pre",{className:"rounded-md bg-muted px-3 py-2 text-xs text-muted-foreground",children:JSON.stringify({detectedBarcode:s},null,2)})]})}const J=({children:s})=>e.jsx(Z,{children:t=>e.jsx(e.Fragment,{children:t(s)})}),ee=[{header:()=>e.jsx(J,{children:"skus.columns.name"}),accessorKey:"name"},{header:()=>e.jsx(J,{children:"skus.columns.unit"}),accessorKey:"unit"},{id:"actions",size:40,cell:({row:s})=>e.jsx(N,{variant:"ghost",onClick:()=>console.log(s.original),children:"Delete"})}];function se(){const[s,t]=i.useState([]),a=R({data:s,columns:ee});return e.jsxs("div",{className:"space-y-3",children:[e.jsx(W,{table:a}),e.jsx(N,{variant:"outline",onClick:()=>t([...s,{id:crypto.randomUUID(),name:"John Doe",unit:"kg"}]),children:"Add Row"})]})}function te(){const[s,t]=i.useState("");return e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx(_,{onNumberClick:a=>t(s+a),onBackspace:()=>t(s.slice(0,-1)),onEnter:()=>console.log(s)}),e.jsx("pre",{className:"rounded-md bg-muted px-3 py-2 text-xs text-muted-foreground",children:JSON.stringify({numpadValue:s},null,2)})]})}function ae(){return e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(P,{variant:"icon"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"icon"})]}),e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(P,{variant:"full"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"full"})]}),e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(P,{variant:"text"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"text"})]})]})}function le(){const s=q();return e.jsx("pre",{className:"max-h-48 overflow-auto rounded-md bg-muted px-3 py-2 text-xs text-muted-foreground",children:JSON.stringify({usbDevices:s.data,error:s.error},null,2)})}const ne=JSON.stringify({printer:"escpos",charactersPerLine:48,language:"en",reduceLineSpacing:!1,printMargins:[0,0],upsideDown:!1,printAsImage:!1,withPaperCut:!0,imageThresholding:128,imageGammaCorrection:1,landscape:!1,printResolution:203},null,2);function re(){const[s,t]=i.useState(""),[a,n]=i.useState(ne),{print:r}=K();return e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx(O,{placeholder:"Receipt content…",value:s,onChange:l=>t(l.target.value)}),e.jsx(O,{className:"font-mono text-xs",value:a,onChange:l=>n(l.target.value)}),e.jsx(N,{className:"self-start",onClick:async()=>{const d=await G(()=>Promise.resolve(s))({},JSON.parse(a));await r(d)},children:"Print"})]})}function ie(){const[s,t]=i.useState(null),[a,n]=i.useState(new b(5)),[r,l]=i.useState(new b(50)),[d,p]=i.useState(new b("9.99")),[o,c]=i.useState(new b(0)),[w,k]=i.useState(new b(10)),[C]=i.useState(new b(42));return e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsx(f,{children:"Basic"}),e.jsx(j,{placeholder:"Enter a number",value:s??"",onValueChange:t}),e.jsxs("pre",{className:"text-xs text-muted-foreground",children:["value: ",s?.toString()??"null"]})]}),e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsx(f,{children:"With buttons"}),e.jsx(j,{showButtons:!0,value:a??"",onValueChange:n}),e.jsxs("pre",{className:"text-xs text-muted-foreground",children:["value: ",a?.toString()??"null"]})]}),e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsx(f,{children:"Min 0 / Max 100"}),e.jsx(j,{showButtons:!0,min:0,max:100,value:r??"",onValueChange:l}),e.jsxs("pre",{className:"text-xs text-muted-foreground",children:["value: ",r?.toString()??"null"]})]}),e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsx(f,{children:"Precision 2 (currency-like)"}),e.jsx(j,{showButtons:!0,precision:2,step:.01,min:0,value:d??"",onValueChange:p}),e.jsxs("pre",{className:"text-xs text-muted-foreground",children:["value: ",d?.toString()??"null"]})]}),e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsx(f,{children:"Step 5"}),e.jsx(j,{showButtons:!0,step:5,value:o??"",onValueChange:c}),e.jsxs("pre",{className:"text-xs text-muted-foreground",children:["value: ",o?.toString()??"null"]})]}),e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsx(f,{children:"Positive only (allowNegative=false)"}),e.jsx(j,{showButtons:!0,allowNegative:!1,min:0,value:w??"",onValueChange:k}),e.jsxs("pre",{className:"text-xs text-muted-foreground",children:["value: ",w?.toString()??"null"]})]}),e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsx(f,{children:"Disabled"}),e.jsx(j,{showButtons:!0,disabled:!0,value:C??""})]})]})}const oe="https://api-staging.salutmercado.com";function ce(s,t){if(t===s)return!0;if(t.endsWith("/*")){const a=t.slice(0,t.indexOf("/"));return s.startsWith(a+"/")}return!1}function de(s,t,a){if(t&&t.length>0&&!t.some(r=>ce(s.type,r)))throw new Error(`File "${s.name}" has mime type "${s.type}" which is not allowed. Accepted: ${t.join(", ")}`);if(a!==void 0&&s.size>a)throw new Error(`File "${s.name}" size (${s.size} bytes) exceeds the maximum allowed size (${a} bytes).`)}function ue(s){return s.trim().replace(/[\\/]+/g,"-").replace(/[\x00-\x1f\x7f]/g,"").replace(/\s+/g,"-").replace(/[^a-zA-Z0-9._-]/g,"-").replace(/-+/g,"-").replace(/^\.+/,"")||"file"}function E(s){const{bucket:t,mimeTypes:a,maxSize:n,multiple:r,onFileUploaded:l,onFilesUploaded:d}=s,[p,o]=i.useState(!1),[c,w]=i.useState(null),[k,C]=i.useState(null),T=i.useRef(null),F=i.useCallback(async u=>{const g=crypto.randomUUID(),x=ue(u.name),v=`${g}/${x}`,{data:h}=await Q.post(`${oe}/api/storage/upload-url`,{bucket:t,path:v,content_type:u.type});if(!h?.upload_url||!h?.public_url)throw new Error("Malformed upload response: missing upload_url or public_url");const $=await fetch(h.upload_url,{method:"PUT",headers:{"Content-Type":u.type},body:u});if(!$.ok)throw new Error(`Upload failed with status ${$.status}`);return{file:u,url:h.public_url}},[t]),D=i.useCallback(async u=>{const g=Array.isArray(u)?u:[u];for(const x of g)de(x,a,n);o(!0),w(null);try{const x=[];for(const v of g){const h=await F(v);x.push(h),l?.(h)}return C(x),d?.(x),x}catch(x){const v=x instanceof Error?x:new Error(String(x));throw w(v),v}finally{o(!1)}},[a,n,F,l,d]),V=i.useCallback(()=>({type:"file",style:{display:"none"},accept:a?.join(","),multiple:r??!1,ref:u=>{T.current=u},onChange:u=>{const g=u.target.files;if(!g||g.length===0)return;const x=Array.from(g);D(x),u.target.value=""}}),[a,r,D]),L=i.useCallback(()=>{T.current?.click()},[]);return{upload:D,getInputProps:V,open:L,isPending:p,error:c,data:k}}function xe(){const[s,t]=i.useState([]),a=i.useCallback(l=>t(d=>[...d,`[${new Date().toLocaleTimeString()}] ${l}`]),[]),n=E({bucket:"sku-images",mimeTypes:["image/png","image/jpeg","image/webp"],maxSize:10*1024*1024,multiple:!1,onFileUploaded:l=>a(`✓ single: ${l.file.name} → ${l.url}`),onFilesUploaded:l=>a(`✓ single batch done (${l.length} file)`)}),r=E({bucket:"sku-images",mimeTypes:["image/*"],maxSize:10*1024*1024,multiple:!0,onFileUploaded:l=>a(`✓ multi: ${l.file.name} → ${l.url}`),onFilesUploaded:l=>a(`✓ multi batch done (${l.length} files)`)});return e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Single image upload"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{...n.getInputProps()}),e.jsx(N,{onClick:n.open,disabled:n.isPending,children:n.isPending?"Uploading…":"Choose image"}),n.isPending&&e.jsx("span",{className:"animate-pulse text-sm text-muted-foreground",children:"uploading…"}),n.error&&e.jsx(B,{variant:"destructive",children:n.error.message})]}),n.data&&e.jsx("div",{className:"flex flex-wrap gap-2",children:n.data.map(l=>e.jsx("img",{src:l.url,alt:l.file.name,className:"h-20 w-20 rounded border object-cover"},l.url))})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Multiple images upload"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{...r.getInputProps()}),e.jsx(N,{onClick:r.open,disabled:r.isPending,children:r.isPending?"Uploading…":"Choose images"}),r.isPending&&e.jsx("span",{className:"animate-pulse text-sm text-muted-foreground",children:"uploading…"}),r.error&&e.jsx(B,{variant:"destructive",children:r.error.message})]}),r.data&&e.jsx("div",{className:"flex flex-wrap gap-2",children:r.data.map(l=>e.jsx("img",{src:l.url,alt:l.file.name,className:"h-20 w-20 rounded border object-cover"},l.url))})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Programmatic upload"}),e.jsx(N,{variant:"outline",className:"self-start",onClick:async()=>{const l=new Blob(["hello"],{type:"image/png"}),d=new File([l],"programmatic.png",{type:"image/png"});try{const p=await n.upload(d);a(`programmatic: ${p.length} file(s) uploaded`)}catch(p){a(`programmatic error: ${p}`)}},children:"Upload fake file via .upload()"})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"State"}),e.jsx("pre",{className:"max-h-40 overflow-auto rounded-md bg-muted px-3 py-2 text-xs",children:JSON.stringify({single:{isPending:n.isPending,error:n.error?.message??null,dataCount:n.data?.length??0},multi:{isPending:r.isPending,error:r.error?.message??null,dataCount:r.data?.length??0}},null,2)})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Callback log"}),e.jsx(N,{variant:"ghost",size:"sm",onClick:()=>t([]),children:"Clear"})]}),e.jsx("pre",{className:"max-h-48 overflow-auto rounded-md bg-muted px-3 py-2 text-xs",children:s.length?s.join(`
`):"(no events yet)"})]})]})}function me(s){try{const[,t]=s.split(".");if(!t)return null;const a=t.replace(/-/g,"+").replace(/_/g,"/"),n=a.padEnd(Math.ceil(a.length/4)*4,"="),r=atob(n);return JSON.parse(r)}catch{return null}}const ge=()=>{const{data:s}=I.auth.useMe(),t=i.useMemo(()=>typeof window>"u"?"":localStorage.getItem("token")??"",[]),a=i.useMemo(()=>me(t),[t]);return e.jsxs(H,{title:"UI Kit",className:"gap-8 pb-12",children:[e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("h1",{className:"border-b pb-2 text-xs font-bold uppercase tracking-widest text-foreground/40",children:"Auth"}),e.jsx(m,{title:"JWT & Me",description:"Current JWT and /identity/me values",children:e.jsxs("div",{className:"space-y-4 text-sm",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium text-foreground/70",children:"JWT"}),e.jsx("pre",{className:"max-h-36 overflow-auto rounded-md bg-muted p-3 text-xs break-all whitespace-pre-wrap",children:t||"No token in localStorage"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium text-foreground/70",children:"JWT Payload"}),e.jsx("pre",{className:"max-h-56 overflow-auto rounded-md bg-muted p-3 text-xs whitespace-pre-wrap",children:JSON.stringify(a,null,2)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium text-foreground/70",children:"/identity/me user"}),e.jsx("pre",{className:"max-h-56 overflow-auto rounded-md bg-muted p-3 text-xs whitespace-pre-wrap",children:JSON.stringify(s??null,null,2)})]})]})})]}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("h1",{className:"border-b pb-2 text-xs font-bold uppercase tracking-widest text-foreground/40",children:"Form Inputs"}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 xl:grid-cols-2",children:[e.jsx(m,{title:"AsyncSelect",description:"Single, multi, grouped, loading, and error patterns",children:e.jsx(X,{})}),e.jsx(m,{title:"NumberInput",description:"Decimal-precision numeric field",children:e.jsx(ie,{})})]})]}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("h1",{className:"border-b pb-2 text-xs font-bold uppercase tracking-widest text-foreground/40",children:"Data Display"}),e.jsx(m,{title:"DataTable",description:"TanStack Table with dynamic rows",children:e.jsx(se,{})})]}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("h1",{className:"border-b pb-2 text-xs font-bold uppercase tracking-widest text-foreground/40",children:"Media & Devices"}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 xl:grid-cols-2",children:[e.jsx(m,{title:"Camera",description:"Barcode scanner via camera",children:e.jsx(Y,{})}),e.jsx(m,{title:"USB Devices",description:"Connected USB peripherals",children:e.jsx(le,{})})]})]}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("h1",{className:"border-b pb-2 text-xs font-bold uppercase tracking-widest text-foreground/40",children:"Interaction"}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 xl:grid-cols-2",children:[e.jsx(m,{title:"Numpad",description:"On-screen numeric keypad",children:e.jsx(te,{})}),e.jsx(m,{title:"Print",description:"Raw receipt printing",children:e.jsx(re,{})})]})]}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("h1",{className:"border-b pb-2 text-xs font-bold uppercase tracking-widest text-foreground/40",children:"Branding"}),e.jsx(m,{title:"Logo",description:"Brand mark variants",children:e.jsx(ae,{})})]}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("h1",{className:"border-b pb-2 text-xs font-bold uppercase tracking-widest text-foreground/40",children:"Uploads"}),e.jsx(m,{title:"File Upload",description:"useUploadFile hook playground",children:e.jsx(xe,{})})]})]})};export{ge as default};
